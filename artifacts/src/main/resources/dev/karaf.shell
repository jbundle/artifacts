features:addurl mvn:org.apache.karaf.cave/apache-karaf-cave/3.0.0-SNAPSHOT/xml/features
features:install cave-obr-server
features:install http obr war
sleep 4000
# Add repository URL
obr:addurl file:/home/don/workspace/workspace/artifacts/artifacts/target/classes/obr/repository/repository.xml
# obr:addurl file:/home/don/workspace/workspace/artifacts/artifacts/target/classes/obr/local-repository.xml
# obr:addurl mvn:org.jbundle.config/jbundle-artifacts//xml/repository
# Update obr

# obr:removeurl file:/home/don/workspace/workspace/artifacts/artifacts/target/classes/obr/repository/jbundle-repository-1.0.1-SNAPSHOT.xml
# cave:create-repository jbundle
# cave:proxy-repository jbundle file:/home/don/.m2/repository/org/jbundle
# obr:removeurl file:/home/don/workspace/workspace/artifacts/artifacts/target/classes/obr/repository/tourgeek-repository-0.8.0-SNAPSHOT.xml
# cave:create-repository tourgeek
# cave:proxy-repository tourgeek file:/home/don/.m2/repository/com/tourgeek
# obr:removeurl file:/home/don/workspace/workspace/artifacts/artifacts/target/classes/obr/repository/jbundle-repository-1.0.1-SNAPSHOT.xml
# cave:create-repository jibx
# cave:proxy-repository jibx file:/home/don/.m2/repository/org/jibx
# obr:removeurl file:/home/don/workspace/workspace/artifacts/artifacts/target/classes/obr/repository/repository.xml
# Start remote service
obr:start -d 'jbundle-util-osgi-obr - obr bundle retrieval'
sleep 1000
obr:start -d 'jbundle-util-osgi-webstart - osgi to web start web bundle'
sleep 1000
obr:deploy -d 'jbundle-base-remote - Remote server'
sleep 5000
start 'jbundle-base-remote - Remote server'
sleep 4000
# Configure webdav
config:edit org.jbundle.util.webapp.webdav
config:propset basePath /web/jbundle/webapp/webdav
config:propset readonly false
config:propset listings true
config:update
# Start other web app
obr:deploy -d com.tourgeek.config.web.other
sleep 5000
start com.tourgeek.config.web.other
sleep 1000
# Start the tour application
obr:deploy -d 'tourgeek-config-web-httpweb - Hybrid osgi webapp'
sleep 4000
start 'tourgeek-config-web-httpweb - Hybrid osgi webapp'
sleep 1000
# Start up wars
osgi:install -s webbundle:mvn:org.jbundle.util.webapp/org.jbundle.util.webapp.webstart//war
osgi:install -s webbundle:mvn:org.jbundle.util.webapp/org.jbundle.util.webapp.cgi//war?Bundle-SymbolicName=jbundle-util-webapp-cgi&Webapp-Context=/awstats

