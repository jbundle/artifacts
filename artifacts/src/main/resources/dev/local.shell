
# docker run --rm --name karaf -p 80:80 -p 443:443 -p 8181:8181 -p 5005:5005 -d tourgeek/karaf
docker run --rm --name karaf -p 80:80 -p 443:443 -p 8181:8181 -p 5005:5005 -d apache/karaf:4.2.7
# docker run --rm --name karaf -p 80:80 -p 443:443 -p 8181:8181 -p 5005:5005 -d apache/karaf:4.2.7 sleep 3600
# docker run -d --name karaf tourgeek/karaf
docker exec karaf mkdir -p /home/karaf/
docker cp ~/workspace/workspace/artifacts/artifacts/src/main/resources/obr/repository/ karaf:/home/karaf/
sleep 5
docker exec -it karaf bash

client


feature:install http obr war
sleep 4

obr:url-add file:///home/karaf/repository/jbundle-repository-1.0.10-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-view-swing-repository-1.0.5-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/tourgeek-repository-0.8.4-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-app-office-repository-1.1.4-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-repository-2.0.8-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-osgi-repository-2.0.10-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-auto-webstart-repository-1.6.10-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-calendarpanel-repository-1.1.6-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-jcalendarbutton-repository-1.6.5-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-other-repository-0.7.10-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-webapp-repository-1.3.7-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-wsdl-repository-1.0.5-SNAPSHOT.xml
obr:url-add file:///home/karaf/repository/jbundle-util-biorhythm-repository-0.8.7-SNAPSHOT.xml

obr:url-add file:///home/karaf/repository/jbundle-external-repository-1.0.3.xml
obr:url-add file:///home/karaf/repository/jbundle-util-osgi-wrapped-repository-1.0.4.xml
obr:url-add http://www.jibx.org/repository/repository.xml
# Web Server, OBR index, war support
# echo Starting up the jbundle framework. Please wait... this may take a few moments
# feature:install http obr war
# sleep 4
# Load the OBR index
# obr:url-add mvn:org.jbundle.config/jbundle-artifacts/${project.version}/xml/repository
# Start the OBR resource retrieval utility

obr:start -d 'jbundle-util-osgi-obr - obr bundle retrieval'
sleep 1
# Start the OSGi to WebStart servlet
obr:start -d 'jbundle-util-osgi-webstart - osgi to web start web bundle'
# http://localhost:8181/webstart/bio.jnlp?mainClass=org.jbundle.util.biorhythm.Biorhythm
sleep 1
# --------TEMPORARY -------- install the saaj module to get soap messaging
# obr:start -d org.apache.servicemix.bundles.saaj-impl

# obr:start -d com.sun.xml.messaging.saaj.impl

# Start the jbundle web services app
obr:deploy 'jbundle-base-remote - Remote server'
sleep 4
obr:start 'jbundle-base-remote - Remote server'
sleep 4
# Start the web sites
obr:deploy 'jbundle-config-web-httpweb - Hybrid osgi webapp'
sleep 4
obr:start -d 'jbundle-config-web-httpweb - Hybrid osgi webapp'
sleep 1
